CREATE TABLE IF NOT EXISTS users (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    email VARCHAR(254) UNIQUE,
    username VARCHAR(250) UNIQUE,
    password VARCHAR
);

CREATE TABLE IF NOT EXISTS track (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    author VARCHAR(200) NOT NULL,
    title VARCHAR(200) NOT NULL
);


CREATE TABLE IF NOT EXISTS cover (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at TIMESTAMP WITHOUT TIME ZONE,
    link VARCHAR(400) NOT NULL,
    is_abstract BOOLEAN NOT NULL
);


CREATE TABLE IF NOT EXISTS playlist (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    vibe VARCHAR(100) NOT NULL,
    url VARCHAR(400) NOT NULL,
    is_private BOOLEAN,
    is_saved BOOLEAN NOT NULL,
    user_id BIGINT,
    track_id BIGINT NOT NULL,
    cover_id BIGINT NOT NULL,
    generations BIGINT NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users (id),
    FOREIGN KEY (track_id) REFERENCES track (id),
    FOREIGN KEY (cover_id) REFERENCES cover (id)
);